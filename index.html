<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <title>Prot√≥tipo de Alta Fidelidade ‚Ä¢ SPA FMPSC</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  
  <style>
    :root{
      --branco: #FFFFFF;
      --laranja: #E78E74;
      --azul: #0B3353;
      --muted: rgba(11,51,83,0.65);
      --radius-xl: 14px;
      --card-width: 360px;
      --card-radius: 12px;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding-top: 50px;
      font-family: 'Inter', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      -webkit-font-smoothing: antialiased;
      background: linear-gradient(180deg, var(--branco) 0%, #fbfbfb 100%);
      color: var(--azul);
    }

    /* ========== ESTILOS GLOBAIS ========== */
    .page {
      display: none;
      min-height: 100vh;
    }

    .page.active {
      display: block;
    }

    /* ========== P√ÅGINAS DE AUTENTICA√á√ÉO (Login, Cadastro, Recuperar) ========== */
    .auth-page {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 32px;
      min-height: 100vh;
    }

    .center-wrap {
      display: flex;
      gap: 32px;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      width: 100%;
      max-width: 1100px;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 16px;
      justify-content: center;
      flex-direction: column;
    }

    .logo img {
      width: 260px;
      height: auto;
      display: block;
      object-fit: contain;
      max-width: 100%;
    }

    .brand-sub {
      margin-top: 6px;
      color: var(--azul);
      font-weight: 600;
      letter-spacing: 0.2px;
      text-align: center;
    }

    .card {
      width: var(--card-width);
      background: var(--branco);
      border-radius: var(--radius-xl);
      box-shadow: 0 10px 30px rgba(11,51,83,0.08);
      padding: 22px;
      border: 1px solid rgba(11,51,83,0.06);
    }

    .card h2 {
      margin: 0 0 10px 0;
      font-size: 22px;
      color: var(--azul);
      text-align: center;
    }

    .form-group {
      margin-bottom: 14px;
    }

    label {
      display: block;
      font-size: 13px;
      color: var(--azul);
      margin-bottom: 6px;
      font-weight: 600;
    }

    input[type="text"], input[type="email"], input[type="password"] {
      width: 100%;
      padding: 12px 14px;
      border-radius: 10px;
      border: 1.5px solid rgba(11,51,83,0.15);
      outline: none;
      font-size: 14px;
      transition: box-shadow .15s, border-color .15s;
      background: #fff;
    }

    input:focus {
      border-color: var(--azul);
      box-shadow: 0 6px 20px rgba(11,51,83,0.06);
    }

    .row-between {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
    }

    .forgot {
      font-size: 13px;
      color: var(--azul);
      text-decoration: none;
      font-weight: 600;
      cursor: pointer;
    }

    .forgot:hover {
      color: var(--laranja);
    }

    .btn {
      display: inline-block;
      width: 100%;
      padding: 12px 14px;
      font-size: 15px;
      border-radius: 12px;
      border: 0;
      cursor: pointer;
      text-align: center;
      font-weight: 700;
      transition: transform .08s ease, box-shadow .08s;
      text-decoration: none;
    }

    .btn:active {
      transform: translateY(1px);
    }

    .btn-primary {
      background: var(--azul);
      color: var(--branco);
      box-shadow: 0 8px 20px rgba(11,51,83,0.08);
    }

    .btn-primary:hover {
      opacity: .95;
    }

    .btn-outline {
      margin-top: 8px;
      background: transparent;
      color: var(--azul);
      border: 2px solid rgba(11,51,83,0.12);
      font-weight: 700;
    }

    .btn-outline:hover {
      background: var(--laranja);
      color: var(--branco);
      border-color: var(--laranja);
    }

    .small-note {
      font-size: 13px;
      color: rgba(11,51,83,0.7);
      text-align: center;
      margin-top: 8px;
    }

    /* ========== NAVBAR (Dashboard) ========== */
    .navbar {
      background: linear-gradient(90deg, #0B3353 0%, #09283f 100%);
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      padding: 12px 0;
    }

    .nav-logo {
      width: 56px;
      height: 56px;
      background: white;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      box-shadow: 0 0 6px rgba(0, 0, 0, 0.25);
    }

    .navbar-brand {
      color: var(--branco);
      font-weight: 700;
    }

    .card-header {
      background: linear-gradient(90deg, var(--azul), #09283f);
      color: #fff;
      font-weight: 700;
      padding: 10px 16px;
      border-top-left-radius: var(--card-radius);
      border-top-right-radius: var(--card-radius);
    }

    .form-label {
      font-weight: 600;
      color: var(--azul);
      font-size: 14px;
    }

    .btn-outline-primary {
      color: var(--azul);
      border-color: rgba(11,51,83,0.12);
      background: transparent;
      font-weight: 700;
      border-radius: 8px;
    }

    .btn-outline-primary:hover {
      background: var(--laranja);
      color: var(--branco);
      border-color: var(--laranja);
    }

    /* ========== FOOTER ========== */
    .footer-ilab {
      background: #0B3353;
      color: white;
      padding: 30px 0;
      margin-top: 60px;
    }

    .footer-ilab .footer-link {
      color: white;
      font-size: 15px;
      text-decoration: none;
      opacity: 0.85;
      transition: opacity 0.3s;
      cursor: pointer;
    }

    .footer-ilab .footer-link:hover {
      opacity: 1;
    }

    .footer-ilab .footer-copy {
      font-size: 13px;
      opacity: 0.65;
      margin-top: 10px;
    }

    /* ========== MOCK CHART ========== */
    .mock-chart {
      background: #f8f9fa;
      border: 2px dashed #dee2e6;
      border-radius: 8px;
      padding: 60px 20px;
      text-align: center;
      color: var(--muted);
      min-height: 400px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .mock-chart::before {
      content: "üìä √Årea de Visualiza√ß√£o de Gr√°ficos";
      font-size: 18px;
      font-weight: 600;
    }

    /* ========== P√ÅGINA QUEM SOMOS ========== */
    .quem-somos-page {
      padding: 40px 20px;
      min-height: 100vh;
    }

    /* ========== MENU DE NAVEGA√á√ÉO ========== */
    .nav-menu {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: linear-gradient(90deg, #0B3353 0%, #09283f 100%);
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
      z-index: 2000;
      padding: 8px 0;
    }

    .nav-menu-content {
      max-width: 1400px;
      margin: 0 auto;
      padding: 0 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 10px;
    }

    .nav-menu-title {
      color: white;
      font-weight: 700;
      font-size: 14px;
      margin: 0;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .nav-menu-links {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }

    .nav-menu-link {
      color: white;
      text-decoration: none;
      padding: 6px 12px;
      border-radius: 6px;
      font-size: 13px;
      font-weight: 600;
      transition: all 0.2s;
      background: rgba(255,255,255,0.1);
      border: 1px solid rgba(255,255,255,0.2);
    }

    .nav-menu-link:hover {
      background: var(--laranja);
      color: white;
      transform: translateY(-1px);
    }

    .nav-menu-link.active {
      background: var(--laranja);
      color: white;
    }

    /* Ajuste para p√°ginas de autentica√ß√£o */
    .auth-page {
      padding-top: 20px;
    }

    /* ========== BADGE PROT√ìTIPO ========== */
    .prototype-badge {
      position: fixed;
      top: 50px;
      right: 20px;
      background: var(--laranja);
      color: white;
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
      z-index: 1000;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }

    /* ========== RESPONSIVE ========== */
    @media (min-width: 900px) {
      .center-wrap {
        flex-direction: row;
      }
    }

    @media (max-width: 767px) {
      .nav-logo {
        display: none;
      }
      .navbar-brand {
        font-size: 1rem;
      }
    }

    /* ========== ANIMA√á√ïES ========== */
    .page {
      animation: fadeIn 0.3s ease-in;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* ========== SELECTS E INPUTS INTERATIVOS ========== */
    .form-select, select {
      cursor: pointer;
      transition: all 0.2s;
    }

    .form-select:hover, select:hover {
      border-color: var(--azul);
      box-shadow: 0 0 0 3px rgba(11,51,83,0.1);
    }

    .form-select:focus, select:focus {
      border-color: var(--azul);
      box-shadow: 0 0 0 3px rgba(11,51,83,0.15);
      outline: none;
    }

    button, .btn, a.btn {
      cursor: pointer;
      transition: all 0.2s ease;
    }

    button:hover, .btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }

    button:active, .btn:active {
      transform: translateY(0);
    }

    /* ========== FEEDBACK VISUAL ========== */
    .alert-message {
      padding: 12px 16px;
      border-radius: 8px;
      margin: 10px 0;
      font-size: 14px;
      display: none;
      animation: slideDown 0.3s ease;
    }

    .alert-message.show {
      display: block;
    }

    .alert-success {
      background: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }

    .alert-error {
      background: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }

    .alert-info {
      background: #d1ecf1;
      color: #0c5460;
      border: 1px solid #bee5eb;
    }

    @keyframes slideDown {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* ========== LOADING STATE ========== */
    .loading {
      opacity: 0.6;
      pointer-events: none;
      position: relative;
    }

    .loading::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 20px;
      height: 20px;
      margin: -10px 0 0 -10px;
      border: 3px solid var(--azul);
      border-top-color: transparent;
      border-radius: 50%;
      animation: spin 0.6s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* ========== INTERA√á√ïES DE FORMUL√ÅRIO ========== */
    input:invalid:not(:placeholder-shown) {
      border-color: #dc3545;
    }

    input:valid:not(:placeholder-shown) {
      border-color: #28a745;
    }

    /* ========== MODAL ========== */
    .modal-backdrop {
      background: rgba(0,0,0,0.5);
    }

    /* ========== HOVER EFFECTS ========== */
    .card:hover {
      box-shadow: 0 12px 32px rgba(11,51,83,0.12);
      transform: translateY(-2px);
      transition: all 0.3s ease;
    }

    .nav-menu-link:hover {
      transform: translateY(-2px);
    }

    /* ========== CLICKABLE ELEMENTS ========== */
    a, button, .btn, .nav-menu-link, .forgot, .footer-link {
      user-select: none;
      -webkit-tap-highlight-color: transparent;
    }

    /* ========== DISABLED STATE ========== */
    button:disabled, .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      pointer-events: none;
    }
  </style>
</head>
<body>

<!-- ========== MENU DE NAVEGA√á√ÉO FIXO ========== -->
<nav class="nav-menu">
  <div class="nav-menu-content">
    <div class="nav-menu-title">
      <span>üìä</span>
      <span>Navega√ß√£o do Prot√≥tipo</span>
    </div>
    <div class="nav-menu-links">
      <a href="#" class="nav-menu-link" onclick="showPage('loginPage'); return false;">Login</a>
      <a href="#" class="nav-menu-link" onclick="showPage('cadastroPage'); return false;">Cadastro</a>
      <a href="#" class="nav-menu-link" onclick="showPage('recuperarPage'); return false;">Recuperar Senha</a>
      <a href="#" class="nav-menu-link" onclick="showPage('resetPage'); return false;">Reset Senha</a>
      <a href="#" class="nav-menu-link" onclick="showPage('indexPage'); return false;">Dashboard</a>
      <a href="#" class="nav-menu-link" onclick="showPage('quemSomosPage'); return false;">Quem Somos</a>
    </div>
  </div>
</nav>

<div class="prototype-badge">üé® PROT√ìTIPO INTERATIVO</div>

<!-- ========== P√ÅGINA DE LOGIN ========== -->
<div id="loginPage" class="page active auth-page">
  <main class="center-wrap" role="main">
    <section class="logo">
      <img src="static/logo.png" alt="Logo SPA ‚Äî Sistema de Perfil Discente" />
      <div class="brand-sub">
        <div style="font-size:18px;font-weight:700;color:var(--azul)">SPA</div>
        <div style="font-size:13px;color:rgba(11,51,83,0.8);margin-top:2px">Sistema de Perfil Discente</div>
      </div>
    </section>

    <section class="card">
      <h2>Login</h2>
      <form id="loginForm">
        <div id="loginMessage" class="alert-message"></div>
        
        <div class="form-group">
          <label for="email">E-mail</label>
          <input id="email" name="email" type="email" placeholder="seu@exemplo.com" required />
        </div>

        <div class="form-group">
          <label for="password">Senha</label>
          <div style="position:relative;">
            <input id="password" name="senha" type="password" placeholder="Digite sua senha" required />
            <button type="button" id="togglePwd" style="position:absolute; right:8px; top:6px; height:32px; padding:6px 8px; border-radius:8px; border:0; background:transparent; cursor:pointer; color:var(--azul); font-weight:700;">Mostrar</button>
          </div>
        </div>

        <div class="row-between" style="margin-bottom:12px;">
          <div></div>
          <a class="forgot" onclick="showPage('recuperarPage')">Esqueci a senha</a>
        </div>

        <div>
          <button class="btn btn-primary" type="submit">Entrar</button>
          <a class="btn btn-outline" onclick="showPage('cadastroPage')">Cadastrar</a>
        </div>

        <div class="small-note" style="margin-top:12px">
          N√£o possui conta? Clique em <strong>Cadastrar</strong>.<br>
          <small style="color: var(--muted);">Credenciais de teste: teste@teste.com.br / 1234</small>
        </div>
      </form>
    </section>
  </main>
</div>

<!-- ========== P√ÅGINA DE CADASTRO ========== -->
<div id="cadastroPage" class="page auth-page">
  <main class="center-wrap" role="main">
    <section class="logo">
      <img src="static/logo.png" alt="Logo SPA ‚Äî Sistema de Perfil Discente" />
      <div class="brand-sub">
        <div style="font-size:18px;font-weight:700;color:var(--azul)">SPA</div>
        <div style="font-size:13px;color:rgba(11,51,83,0.8);margin-top:2px">Sistema de Perfil Discente</div>
      </div>
    </section>

    <section class="card">
      <h2>Cadastrar Conta</h2>
      <form id="formCadastro">
        <div id="cadastroMessage" class="alert-message"></div>
        
        <div class="form-group">
          <label>Nome completo</label>
          <input type="text" name="nome" placeholder="Digite o nome completo" required />
        </div>

        <div class="form-group">
          <label>CPF</label>
          <input type="text" id="cpf" name="cpf" maxlength="14" placeholder="000.000.000-00" required />
        </div>

        <div class="form-group">
          <label>E-mail institucional</label>
          <input type="email" name="email" placeholder="exemplo@fmpsc.edu.br" required />
        </div>

        <div class="form-group">
          <label>Cargo</label>
          <input type="text" name="cargo" placeholder="Digite um cargo" required />
        </div>

        <div class="form-group">
          <label>Senha</label>
          <input type="password" name="senha" placeholder="Digite sua senha" required />
        </div>

        <div class="form-group">
          <label>Confirmar senha</label>
          <input type="password" name="confirmar" placeholder="Confirme sua senha" required />
        </div>

        <button type="submit" class="btn btn-primary">Cadastrar</button>
        <a class="btn btn-outline" onclick="showPage('loginPage')">Voltar ao Login</a>

        <div class="small-note" style="margin-top:12px">
          J√° possui conta? Clique em <strong>Voltar ao Login</strong>.
        </div>
      </form>
    </section>
  </main>
</div>

<!-- ========== P√ÅGINA RECUPERAR SENHA ========== -->
<div id="recuperarPage" class="page auth-page">
  <main class="center-wrap" role="main">
    <section class="logo">
      <img src="static/logo.png" alt="Logo SPA ‚Äî Sistema de Perfil Discente" />
      <div class="brand-sub">
        <div style="font-size:18px;font-weight:700;color:var(--azul)">SPA</div>
        <div style="font-size:13px;color:rgba(11,51,83,0.8);margin-top:2px">Sistema de Perfil Discente</div>
      </div>
    </section>

    <section class="card">
      <h2>Recuperar Senha</h2>
      <form id="recuperarForm">
        <div id="recuperarMessage" class="alert-message"></div>
        
        <div class="form-group">
          <label for="emailRecuperar">E-mail cadastrado</label>
          <input id="emailRecuperar" name="email" type="email" placeholder="Digite seu e-mail" required />
        </div>

        <button class="btn btn-primary" type="submit">Enviar link de recupera√ß√£o</button>

        <div class="small-note" style="margin-top:14px;">
          <a class="forgot" onclick="showPage('loginPage')">Voltar ao login</a>
        </div>
      </form>
    </section>
  </main>
</div>

<!-- ========== P√ÅGINA RESET SENHA (Redefinir Senha) ========== -->
<div id="resetPage" class="page auth-page">
  <main class="center-wrap" role="main">
    <section class="logo">
      <img src="static/logo.png" alt="Logo SPA ‚Äî Sistema de Perfil Discente" />
      <div class="brand-sub">
        <div style="font-size:18px;font-weight:700;color:var(--azul)">SPA</div>
        <div style="font-size:13px;color:rgba(11,51,83,0.8);margin-top:2px">Sistema de Perfil Discente</div>
      </div>
    </section>

    <section class="card">
      <h2>Redefinir Senha</h2>
      <form id="resetForm">
        <div id="resetMessage" class="alert-message"></div>
        
        <div class="form-group">
          <label for="novaSenha">Nova Senha</label>
          <input id="novaSenha" name="senha" type="password" placeholder="Digite sua nova senha" required />
        </div>

        <div class="form-group">
          <label for="confirmarNovaSenha">Confirmar Nova Senha</label>
          <input id="confirmarNovaSenha" name="confirmar_senha" type="password" placeholder="Confirme sua nova senha" required />
        </div>

        <button class="btn btn-primary" type="submit">Salvar nova senha</button>

        <div class="small-note" style="margin-top:14px;">
          <a class="forgot" onclick="showPage('loginPage')">Voltar ao login</a>
        </div>
      </form>
    </section>
  </main>
</div>

<!-- ========== P√ÅGINA INDEX (DASHBOARD) ========== -->
<div id="indexPage" class="page">
  <nav class="navbar shadow-sm mb-4">
    <div class="container-fluid d-flex justify-content-between align-items-center">
      <div class="d-flex align-items-center gap-3">
        <img src="static/logo-sem-fundo.png" alt="SPA" class="nav-logo" style="width: 56px; height: auto; object-fit: contain; padding: 6px; background: white; border-radius: 8px; box-shadow: 0 0 6px rgba(0, 0, 0, 0.25); border: 1px solid rgba(255, 255, 255, 0.7);" />
        <div class="text-white fw-bold navbar-brand">M√≥dulo de An√°lises</div>
      </div>

      <div class="d-flex align-items-center gap-2">
        <button class="btn btn-outline-light btn-sm" onclick="alert('Tutorial de suporte')">‚ùì Suporte</button>
        <div class="text-white me-3 small">
          Bem-vindo, <strong>Usu√°rio Exemplo</strong><br>
          <span style="opacity: 0.8;">usuario@aluno.fmpsc.edu.br</span>
        </div>
        <button class="btn btn-success btn-sm" data-bs-toggle="modal" data-bs-target="#uploadModal">üì§ Enviar CSV</button>
        <button class="btn btn-outline-light btn-sm" onclick="alert('Lista de arquivos atualizada')">‚Üª</button>
        <a class="btn btn-link btn-sm text-white" onclick="showPage('loginPage')">Sair</a>
      </div>
    </div>
  </nav>

  <div class="container">
    <div class="row g-3">
      <!-- LEFT PANEL -->
      <aside class="col-12 col-md-4">
        <div class="card mb-3">
          <div class="card-header">Arquivos CSV</div>
          <div class="card-body">
            <label class="form-label small">Arquivo base (para an√°lise)</label>
            <select id="arquivoSelect" class="form-select mb-2" onchange="updateColumns()">
              <option value="">Selecione um CSV</option>
              <option value="arquivo1.csv">arquivo1.csv</option>
              <option value="arquivo2.csv">arquivo2.csv</option>
              <option value="arquivo3.csv">arquivo3.csv</option>
            </select>

            <label class="form-label small">Comparar com (opcional)</label>
            <select id="arquivoCompare" class="form-select mb-2">
              <option value="">(nenhum)</option>
              <option value="arquivo1.csv">arquivo1.csv</option>
              <option value="arquivo2.csv">arquivo2.csv</option>
              <option value="arquivo3.csv">arquivo3.csv</option>
            </select>
          </div>
        </div>

        <div class="card mb-3">
          <div class="card-header">Configura√ß√£o</div>
          <div class="card-body">
            <label class="form-label">Coluna principal (mesma nos 2 arquivos)</label>
            <select id="colunaSelect" class="form-select mb-2">
              <option value="">Selecione um arquivo primeiro</option>
              <option value="coluna1">Coluna 1</option>
              <option value="coluna2">Coluna 2</option>
              <option value="coluna3">Coluna 3</option>
            </select>

            <label class="form-label">Agrupar por (opcional)</label>
            <select id="colunaGroupBy" class="form-select mb-2">
              <option value="">Nenhum agrupamento</option>
              <option value="grupo1">Grupo 1</option>
              <option value="grupo2">Grupo 2</option>
            </select>

            <label class="form-label">Tipo de gr√°fico</label>
            <select id="tipoSelect" class="form-select mb-3">
              <option value="bar">Barras</option>
              <option value="pie">Pizza</option>
              <option value="line">Linha</option>
              <option value="histogram">Histograma</option>
            </select>

            <div id="filtersArea" class="mb-3 small text-muted" style="padding: 10px; border: 1px dashed rgba(11,51,83,0.06); border-radius: 8px; background: #f8f9fa; max-height: 220px; overflow-y: auto;">
              <strong>Filtros:</strong> Ser√£o exibidos aqui ap√≥s selecionar um arquivo
            </div>

            <button class="btn btn-primary w-100" onclick="gerarGrafico()">Gerar Gr√°fico</button>
          </div>
        </div>

        <div class="card mb-3">
          <div class="card-header">Comparar</div>
          <div class="card-body">
            <p class="small text-muted mb-2">Escolha um arquivo base (acima) e um arquivo para comparar. A compara√ß√£o exige que a <strong>mesma coluna</strong> exista nos dois arquivos.</p>
            <div class="d-grid gap-2">
              <button class="btn btn-outline-primary" onclick="gerarComparacao()">Gerar e Comparar</button>
            </div>
          </div>
        </div>
      </aside>

      <!-- RIGHT PANEL -->
      <main class="col-12 col-md-8">
        <!-- Mapa Geogr√°fico -->
        <div class="card mb-3" id="mapaCard" style="display: none;">
          <div class="card-header d-flex justify-content-between align-items-center">
            <span>Exemplo de Mapa de Calor Geogr√°fico</span>
            <button class="btn btn-sm btn-outline-light" onclick="document.getElementById('mapaCard').style.display='none'">‚úï</button>
          </div>
          <div class="card-body">
            <h5 class="mb-3">Distribui√ß√£o Geogr√°fica dos Acad√™micos</h5>
            <p class="small text-muted mb-3">Mapa interativo com marcadores (bolinhas) mostrando quantidade de alunos por cidade</p>
            
            <div id="mapaGeografico" style="height: 500px; width: 100%; border-radius: 8px; border: 1px solid #dee2e6;"></div>
            
            <div class="row mt-4 g-3">
              <div class="col-6 col-md-3">
                <div class="card text-center">
                  <div class="card-body">
                    <h3 id="statTotalAlunos" class="mb-0">318</h3>
                    <small class="text-muted">Total de Alunos</small>
                  </div>
                </div>
              </div>
              <div class="col-6 col-md-3">
                <div class="card text-center">
                  <div class="card-body">
                    <h3 id="statTotalCidades" class="mb-0">6</h3>
                    <small class="text-muted">Cidades</small>
                  </div>
                </div>
              </div>
              <div class="col-6 col-md-3">
                <div class="card text-center">
                  <div class="card-body">
                    <h5 id="statMaiorCidade" class="mb-0" style="font-size: 1rem;">Palho√ßa</h5>
                    <small class="text-muted">Maior Concentra√ß√£o</small>
                  </div>
                </div>
              </div>
              <div class="col-6 col-md-3">
                <div class="card text-center">
                  <div class="card-body">
                    <h3 id="statAlunosMaior" class="mb-0">280</h3>
                    <small class="text-muted">Alunos em Palho√ßa</small>
                  </div>
                </div>
              </div>
            </div>
            
            <p class="small text-muted mt-3 mb-0">
              Dados baseados no arquivo CSV real do projeto. As bolinhas s√£o proporcionais √† quantidade de alunos em cada cidade.
            </p>
          </div>
        </div>

        <div class="card">
          <div class="card-header d-flex justify-content-between align-items-center">
            <span>Resultado</span>
            <div>
              <button id="btnMostrarMapa" class="btn btn-info btn-sm me-2" onclick="mostrarMapaGeografico()">üó∫Ô∏è Mapa Geogr√°fico</button>
              <button id="btnSalvarTodos" class="btn btn-success btn-sm d-none" onclick="alert('Gr√°ficos salvos!')">üíæ Salvar todos</button>
            </div>
          </div>
          <div class="card-body">
            <div id="graficoContainer" class="d-flex flex-column gap-4">
              <p class="text-center text-secondary">Nenhum gr√°fico gerado ainda. Selecione um arquivo e configure as op√ß√µes para gerar gr√°ficos.</p>
            </div>
          </div>
        </div>
      </main>
    </div>
  </div>

  <!-- UPLOAD MODAL -->
  <div class="modal fade" id="uploadModal" tabindex="-1">
    <div class="modal-dialog modal-sm">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Enviar CSV</h5>
          <button class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <input type="file" id="csvFile" accept=".csv" class="form-control">
          <div class="form-text small mt-2">Envie apenas arquivos .csv (mesmo nome pode sobrescrever).</div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
          <button class="btn btn-success" onclick="alert('Arquivo enviado com sucesso!'); bootstrap.Modal.getInstance(document.getElementById('uploadModal')).hide();">Enviar</button>
        </div>
      </div>
    </div>
  </div>

  <footer class="footer-ilab mt-5">
    <div class="container py-4 text-center">
      <a class="footer-link" onclick="showPage('quemSomosPage')">Quem somos</a>
      <p class="footer-copy mt-2">
        ¬© 2024 iLab ‚Äî Sistema de Processamento e An√°lises.
      </p>
    </div>
  </footer>
</div>

<!-- ========== P√ÅGINA QUEM SOMOS ========== -->
<div id="quemSomosPage" class="page quem-somos-page">
  <nav class="navbar shadow-sm mb-4">
    <div class="container-fluid d-flex justify-content-between align-items-center">
      <div class="d-flex align-items-center gap-3">
        <img src="static/logo-sem-fundo.png" alt="SPA" class="nav-logo" style="width: 56px; height: auto; object-fit: contain; padding: 6px; background: white; border-radius: 8px; box-shadow: 0 0 6px rgba(0, 0, 0, 0.25); border: 1px solid rgba(255, 255, 255, 0.7);" />
        <div class="text-white fw-bold navbar-brand">SPA - Sistema de Perfil Discente</div>
      </div>
      <div>
        <a class="btn btn-outline-light btn-sm" onclick="showPage('indexPage')">‚¨Ö Voltar</a>
      </div>
    </div>
  </nav>

  <div class="container mt-5">
    <h2 class="mb-3">Quem somos</h2>

    <p style="font-size: 17px; line-height: 1.6;">
      O <strong>iLab</strong> √© um ambiente de inova√ß√£o e desenvolvimento criado para
      oferecer solu√ß√µes modernas, inteligentes e eficientes para √≥rg√£os p√∫blicos.
      Nosso objetivo √© facilitar processos, melhorar fluxos de trabalho e entregar
      tecnologia de qualidade, com foco em simplicidade, seguran√ßa e desempenho.
    </p>

    <p style="font-size: 17px; line-height: 1.6;">
      Esta plataforma foi constru√≠da para apoiar a FMPSC, oferecendo agilidade
      na gest√£o de an√°lises, automa√ß√µes e ferramentas internas que ajudam no dia a dia
      da opera√ß√£o.
    </p>
  </div>

  <footer class="footer-ilab mt-5">
    <div class="container py-4 text-center">
      <p class="footer-copy mt-2">
        ¬© 2024 iLab ‚Äî Sistema de Processamento e An√°lises.
      </p>
    </div>
  </footer>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<!-- Leaflet para Mapa -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
  // ========== NAVEGA√á√ÉO ENTRE P√ÅGINAS ==========
  function showPage(pageId) {
    // Esconde todas as p√°ginas
    document.querySelectorAll('.page').forEach(page => {
      page.classList.remove('active');
    });
    
    // Mostra a p√°gina selecionada
    const targetPage = document.getElementById(pageId);
    if (targetPage) {
      targetPage.classList.add('active');
      window.scrollTo(0, 0);
    }
    
    // Atualiza o menu ativo
    updateActiveMenu(pageId);
  }

  // ========== ATUALIZAR MENU ATIVO ==========
  function updateActiveMenu(pageId) {
    // Remove classe active de todos os links
    document.querySelectorAll('.nav-menu-link').forEach(link => {
      link.classList.remove('active');
    });
    
    // Mapeia pageId para texto do link
    const pageMap = {
      'loginPage': 'Login',
      'cadastroPage': 'Cadastro',
      'recuperarPage': 'Recuperar Senha',
      'resetPage': 'Reset Senha',
      'indexPage': 'Dashboard',
      'quemSomosPage': 'Quem Somos'
    };
    
    // Adiciona classe active ao link correspondente
    const linkText = pageMap[pageId];
    if (linkText) {
      document.querySelectorAll('.nav-menu-link').forEach(link => {
        if (link.textContent.trim() === linkText) {
          link.classList.add('active');
        }
      });
    }
  }

  // ========== FUN√á√ÉO PARA MOSTRAR MENSAGEM ==========
  function showMessage(elementId, message, type = 'info') {
    const element = document.getElementById(elementId);
    if (!element) return;
    
    element.textContent = message;
    element.className = `alert-message alert-${type} show`;
    
    setTimeout(() => {
      element.classList.remove('show');
      setTimeout(() => {
        element.textContent = '';
      }, 300);
    }, 3000);
  }

  // ========== LOGIN ==========
  document.getElementById('loginForm')?.addEventListener('submit', function(e) {
    e.preventDefault();
    
    const email = document.getElementById('email').value.trim().toLowerCase();
    const senha = document.getElementById('password').value;
    const submitBtn = this.querySelector('button[type="submit"]');
    
    // Valida√ß√£o b√°sica
    if (!email || !senha) {
      showMessage('loginMessage', 'Por favor, preencha todos os campos.', 'error');
      return;
    }
    
    // Adiciona loading
    submitBtn.disabled = true;
    submitBtn.textContent = 'Entrando...';
    
    // Simula delay de autentica√ß√£o
    setTimeout(() => {
      // Valida√ß√£o de credenciais
      if (email === 'teste@teste.com.br' && senha === '1234') {
        showMessage('loginMessage', 'Login realizado com sucesso!', 'success');
        setTimeout(() => {
          showPage('indexPage');
        }, 500);
      } else {
        showMessage('loginMessage', 'E-mail ou senha incorretos. Use: teste@teste.com.br / 1234', 'error');
        submitBtn.disabled = false;
        submitBtn.textContent = 'Entrar';
      }
    }, 800);
  });

  // ========== CADASTRO ==========
  document.getElementById('formCadastro')?.addEventListener('submit', function(e) {
    e.preventDefault();
    
    const nome = this.querySelector('[name="nome"]').value.trim();
    const cpf = this.querySelector('[name="cpf"]').value;
    const email = this.querySelector('[name="email"]').value.trim().toLowerCase();
    const cargo = this.querySelector('[name="cargo"]').value.trim();
    const senha = this.querySelector('[name="senha"]').value;
    const confirmar = this.querySelector('[name="confirmar"]').value;
    
    // Valida√ß√µes
    if (!nome || !cpf || !email || !cargo || !senha || !confirmar) {
      showMessage('cadastroMessage', 'Por favor, preencha todos os campos.', 'error');
      return;
    }
    
    // Valida√ß√£o de email institucional
    if (!email.includes('@fmpsc.edu.br') && !email.includes('@aluno.fmpsc.edu.br')) {
      showMessage('cadastroMessage', 'Use um e-mail institucional v√°lido (@fmpsc.edu.br).', 'error');
      return;
    }
    
    // Valida√ß√£o de senha
    if (senha.length < 8) {
      showMessage('cadastroMessage', 'A senha deve ter pelo menos 8 caracteres.', 'error');
      return;
    }
    
    if (senha !== confirmar) {
      showMessage('cadastroMessage', 'As senhas n√£o coincidem.', 'error');
      return;
    }
    
    // Valida√ß√£o de CPF
    const cpfNumeros = cpf.replace(/\D/g, '');
    if (cpfNumeros.length !== 11) {
      showMessage('cadastroMessage', 'CPF inv√°lido. Verifique e tente novamente.', 'error');
      return;
    }
    
    const submitBtn = this.querySelector('button[type="submit"]');
    submitBtn.disabled = true;
    submitBtn.textContent = 'Cadastrando...';
    
    // Simula cadastro
    setTimeout(() => {
      showMessage('cadastroMessage', 'Cadastro realizado com sucesso! Redirecionando...', 'success');
      setTimeout(() => {
        showPage('loginPage');
      }, 1500);
    }, 1000);
  });

  // ========== RECUPERAR SENHA ==========
  document.getElementById('recuperarForm')?.addEventListener('submit', function(e) {
    e.preventDefault();
    
    const email = this.querySelector('[name="email"]').value.trim();
    
    if (!email) {
      showMessage('recuperarMessage', 'Por favor, informe seu e-mail.', 'error');
      return;
    }
    
    if (!email.includes('@')) {
      showMessage('recuperarMessage', 'E-mail inv√°lido.', 'error');
      return;
    }
    
    const submitBtn = this.querySelector('button[type="submit"]');
    submitBtn.disabled = true;
    submitBtn.textContent = 'Enviando...';
    
    setTimeout(() => {
      showMessage('recuperarMessage', 'Link de recupera√ß√£o enviado para seu e-mail!', 'success');
      setTimeout(() => {
        showPage('resetPage');
      }, 2000);
    }, 1000);
  });

  // ========== RESET SENHA ==========
  document.getElementById('resetForm')?.addEventListener('submit', function(e) {
    e.preventDefault();
    const novaSenha = document.getElementById('novaSenha').value;
    const confirmarSenha = document.getElementById('confirmarNovaSenha').value;
    
    if (!novaSenha || !confirmarSenha) {
      showMessage('resetMessage', 'Por favor, preencha todos os campos.', 'error');
      return;
    }
    
    if (novaSenha.length < 8) {
      showMessage('resetMessage', 'A senha deve ter pelo menos 8 caracteres!', 'error');
      return;
    }
    
    if (novaSenha !== confirmarSenha) {
      showMessage('resetMessage', 'As senhas n√£o coincidem!', 'error');
      return;
    }
    
    const submitBtn = this.querySelector('button[type="submit"]');
    submitBtn.disabled = true;
    submitBtn.textContent = 'Salvando...';
    
    setTimeout(() => {
      showMessage('resetMessage', 'Senha redefinida com sucesso!', 'success');
      setTimeout(() => {
        showPage('loginPage');
      }, 1500);
    }, 1000);
  });

  // ========== TOGGLE PASSWORD ==========
  document.getElementById('togglePwd')?.addEventListener('click', function(){
    const pwd = document.getElementById('password');
    if(pwd.type === 'password'){ 
      pwd.type='text'; 
      this.textContent='Ocultar'; 
    } else { 
      pwd.type='password'; 
      this.textContent='Mostrar'; 
    }
  });

  // ========== M√ÅSCARA CPF ==========
  const cpfInput = document.getElementById('cpf');
  if (cpfInput) {
    cpfInput.addEventListener('input', () => {
      let v = cpfInput.value.replace(/\D/g, '');
      v = v.replace(/(\d{3})(\d)/, '$1.$2');
      v = v.replace(/(\d{3})(\d)/, '$1.$2');
      v = v.replace(/(\d{3})(\d{1,2})$/, '$1-$2');
      cpfInput.value = v;
    });
  }

  // ========== ATUALIZAR COLUNAS ==========
  function updateColumns() {
    const arquivoSelect = document.getElementById('arquivoSelect');
    const colunaSelect = document.getElementById('colunaSelect');
    
    if (arquivoSelect.value) {
      colunaSelect.innerHTML = `
        <option value="coluna1">Coluna 1 - Nome</option>
        <option value="coluna2">Coluna 2 - Idade</option>
        <option value="coluna3">Coluna 3 - Cidade</option>
        <option value="coluna4">Coluna 4 - Status</option>
      `;
      
      // Atualiza √°rea de filtros
      document.getElementById('filtersArea').innerHTML = `
        <strong>Filtros dispon√≠veis:</strong><br>
        <div class="mt-2">
          <label class="form-check-label small" style="display: block; margin-bottom: 8px; cursor: pointer;">
            <input type="checkbox" class="form-check-input me-1" onchange="updateFilters()"> Categoria A
          </label>
          <label class="form-check-label small" style="display: block; margin-bottom: 8px; cursor: pointer;">
            <input type="checkbox" class="form-check-input me-1" onchange="updateFilters()"> Categoria B
          </label>
          <label class="form-check-label small" style="display: block; margin-bottom: 8px; cursor: pointer;">
            <input type="checkbox" class="form-check-input me-1" onchange="updateFilters()"> Categoria C
          </label>
        </div>
      `;
    } else {
      colunaSelect.innerHTML = '<option value="">Selecione um arquivo primeiro</option>';
      document.getElementById('filtersArea').innerHTML = '<strong>Filtros:</strong> Ser√£o exibidos aqui ap√≥s selecionar um arquivo';
    }
  }

  // ========== GERAR GR√ÅFICO ==========
  function gerarGrafico() {
    const arquivo = document.getElementById('arquivoSelect').value;
    const coluna = document.getElementById('colunaSelect').value;
    const tipo = document.getElementById('tipoSelect').value;
    const groupBy = document.getElementById('colunaGroupBy').value;
    
    if (!arquivo || !coluna) {
      const container = document.getElementById('graficoContainer');
      container.innerHTML = `
        <div class="alert-message alert-error show">
          Por favor, selecione um arquivo e uma coluna para gerar o gr√°fico.
        </div>
      `;
      setTimeout(() => {
        container.innerHTML = '<p class="text-center text-secondary">Nenhum gr√°fico gerado ainda. Selecione um arquivo e configure as op√ß√µes para gerar gr√°ficos.</p>';
      }, 3000);
      return;
    }
    
    const container = document.getElementById('graficoContainer');
    container.innerHTML = '<div class="text-center p-4"><div class="loading"></div><p class="mt-3">Gerando gr√°fico...</p></div>';
    
    // Simula gera√ß√£o do gr√°fico
    setTimeout(() => {
      const tipoNome = {
        'bar': 'Barras',
        'pie': 'Pizza',
        'line': 'Linha',
        'histogram': 'Histograma'
      };
      
      container.innerHTML = `
        <div class="card">
          <div class="card-header">Gr√°fico de ${tipoNome[tipo]} - ${coluna}${groupBy ? ' (Agrupado por: ' + groupBy + ')' : ''}</div>
          <div class="card-body">
            <div class="mock-chart" style="min-height: 300px;">
              üìä Gr√°fico de ${tipoNome[tipo]} gerado com sucesso!<br>
              <small style="color: var(--muted);">Arquivo: ${arquivo}<br>Coluna: ${coluna}${groupBy ? '<br>Agrupado por: ' + groupBy : ''}</small>
            </div>
            <div class="mt-3 d-flex justify-content-between align-items-center">
              <div>
                <button class="btn btn-outline-primary btn-sm" onclick="gerarGrafico()">üîÑ Regenerar</button>
              </div>
              <div>
                <button class="btn btn-success btn-sm" onclick="salvarGrafico('${tipo}', '${coluna}')">üíæ Salvar</button>
              </div>
            </div>
          </div>
        </div>
      `;
      
      document.getElementById('btnSalvarTodos').classList.remove('d-none');
    }, 1500);
  }
  
  // ========== SALVAR GR√ÅFICO ==========
  function salvarGrafico(tipo, coluna) {
    alert(`Gr√°fico de ${tipo} (${coluna}) salvo com sucesso!`);
  }

  // ========== GERAR COMPARA√á√ÉO ==========
  function gerarComparacao() {
    const arquivo1 = document.getElementById('arquivoSelect').value;
    const arquivo2 = document.getElementById('arquivoCompare').value;
    const coluna = document.getElementById('colunaSelect').value;
    
    if (!arquivo1 || !arquivo2 || !coluna) {
      const container = document.getElementById('graficoContainer');
      container.innerHTML = `
        <div class="alert-message alert-error show">
          Por favor, selecione ambos os arquivos e uma coluna para comparar.
        </div>
      `;
      setTimeout(() => {
        container.innerHTML = '<p class="text-center text-secondary">Nenhum gr√°fico gerado ainda. Selecione um arquivo e configure as op√ß√µes para gerar gr√°ficos.</p>';
      }, 3000);
      return;
    }
    
    if (arquivo1 === arquivo2) {
      const container = document.getElementById('graficoContainer');
      container.innerHTML = `
        <div class="alert-message alert-error show">
          Selecione arquivos diferentes para comparar.
        </div>
      `;
      setTimeout(() => {
        container.innerHTML = '<p class="text-center text-secondary">Nenhum gr√°fico gerado ainda. Selecione um arquivo e configure as op√ß√µes para gerar gr√°ficos.</p>';
      }, 3000);
      return;
    }
    
    const container = document.getElementById('graficoContainer');
    container.innerHTML = '<div class="text-center p-4"><div class="loading"></div><p class="mt-3">Gerando compara√ß√£o...</p></div>';
    
    setTimeout(() => {
      container.innerHTML = `
        <div class="card mb-3">
          <div class="card-header">Base - ${arquivo1}</div>
          <div class="card-body">
            <div class="mock-chart" style="min-height: 250px;">üìä Gr√°fico Base - ${coluna}</div>
          </div>
        </div>
        <div class="card mb-3">
          <div class="card-header">Comparador - ${arquivo2}</div>
          <div class="card-body">
            <div class="mock-chart" style="min-height: 250px;">üìä Gr√°fico Comparador - ${coluna}</div>
          </div>
        </div>
        <div class="card">
          <div class="card-header">Varia√ß√£o % (Comparador vs Base)</div>
          <div class="card-body">
            <div class="mock-chart" style="min-height: 250px;">üìä Gr√°fico de Varia√ß√£o Percentual</div>
            <div class="mt-3 text-end">
              <button class="btn btn-success btn-sm" onclick="salvarGrafico('comparacao', '${coluna}')">üíæ Salvar Compara√ß√£o</button>
            </div>
          </div>
        </div>
      `;
      
      document.getElementById('btnSalvarTodos').classList.remove('d-none');
    }, 1500);
  }

  // ========== ATUALIZAR FILTROS ==========
  function updateFilters() {
    const checkboxes = document.querySelectorAll('#filtersArea input[type="checkbox"]');
    const selecionados = Array.from(checkboxes).filter(cb => cb.checked).length;
    console.log(`${selecionados} filtro(s) selecionado(s)`);
  }

  // ========== LIMPAR FORMUL√ÅRIOS AO MUDAR DE P√ÅGINA ==========
  const originalShowPage = showPage;
  showPage = function(pageId) {
    // Limpa mensagens de alerta
    document.querySelectorAll('.alert-message').forEach(msg => {
      msg.classList.remove('show');
      msg.textContent = '';
    });
    
    // Reseta bot√µes
    document.querySelectorAll('button[type="submit"]').forEach(btn => {
      btn.disabled = false;
      if (btn.textContent.includes('...')) {
        const originalText = btn.getAttribute('data-original-text') || 'Enviar';
        btn.textContent = originalText;
      }
    });
    
    originalShowPage(pageId);
  };

  // ========== MAPA GEOGR√ÅFICO ==========
  let mapaLeaflet = null;

  function mostrarMapaGeografico() {
    // Mostra o card do mapa
    const mapaCard = document.getElementById('mapaCard');
    if (mapaCard) {
      mapaCard.style.display = 'block';
      mapaCard.scrollIntoView({ behavior: 'smooth' });
    }

    // Limpa mapa anterior se existir
    const mapaDiv = document.getElementById('mapaGeografico');
    if (mapaDiv) {
      mapaDiv.innerHTML = '';
    }

    // Dados simulados baseados no CSV real
    const dadosCidades = [
      { nome: 'Palho√ßa', lat: -27.6453, lng: -48.6697, quantidade: 280 },
      { nome: 'Florian√≥polis', lat: -27.5954, lng: -48.5480, quantidade: 25 },
      { nome: 'S√£o Jos√©', lat: -27.6146, lng: -48.6366, quantidade: 8 },
      { nome: 'Ant√¥nio Carlos', lat: -27.5194, lng: -48.7669, quantidade: 3 },
      { nome: 'Bigua√ßu', lat: -27.4942, lng: -48.6556, quantidade: 1 },
      { nome: 'Santo Amaro da Imperatriz', lat: -27.6881, lng: -48.7786, quantidade: 1 }
    ];

    // Cria mapa Leaflet
    if (mapaDiv && typeof L !== 'undefined') {
      // Centro em Palho√ßa/SC (regi√£o da FMPSC)
      mapaLeaflet = L.map('mapaGeografico').setView([-27.6453, -48.6697], 10);

      // Adiciona tile layer
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: 'Leaflet | ¬© OpenStreetMap contributors',
        maxZoom: 19
      }).addTo(mapaLeaflet);

      // Encontra valores m√°ximo e m√≠nimo para normalizar tamanhos
      const quantidades = dadosCidades.map(d => d.quantidade || 1);
      const maxQtd = Math.max(...quantidades);
      const minQtd = Math.min(...quantidades);

      // Adiciona marcadores para cada cidade
      dadosCidades.forEach(cidade => {
        const quantidade = cidade.quantidade || 1;
        const nome = cidade.nome || 'Cidade desconhecida';
        
        // Tamanho do marcador proporcional √† quantidade (entre 8 e 40 pixels)
        const tamanho = Math.max(8, Math.min(40, 8 + (quantidade / maxQtd) * 32));
        
        // Cor baseada na quantidade (laranja para mais, azul para menos)
        const intensidade = (quantidade - minQtd) / (maxQtd - minQtd || 1);
        const red = Math.round(231 - (intensidade * 50)); // 231 (laranja) a 181
        const green = Math.round(142 - (intensidade * 100)); // 142 a 42
        const blue = Math.round(116 - (intensidade * 50)); // 116 a 66
        const cor = `rgb(${red}, ${green}, ${blue})`;

        // Cria marcador circular
        const marker = L.circleMarker([cidade.lat, cidade.lng], {
          radius: tamanho,
          fillColor: cor,
          color: '#0B3353',
          weight: 2,
          opacity: 1,
          fillOpacity: 0.7
        }).addTo(mapaLeaflet);

        // Tooltip com informa√ß√µes
        marker.bindPopup(`
          <strong>${nome}</strong><br>
          <strong>${quantidade}</strong> aluno(s)
        `);

        // Adiciona label no hover
        marker.on('mouseover', function(e) {
          this.openPopup();
        });
      });

      // Ajusta zoom para mostrar todos os marcadores
      if (dadosCidades.length > 0) {
        const bounds = dadosCidades.map(d => [d.lat, d.lng]);
        mapaLeaflet.fitBounds(bounds, { padding: [50, 50] });
      }
    } else {
      if (mapaDiv) {
        mapaDiv.innerHTML = '<p class="text-center text-danger">Biblioteca Leaflet n√£o carregada. Recarregue a p√°gina.</p>';
      }
    }
  }

  // Inicializa√ß√£o
  document.addEventListener('DOMContentLoaded', function() {
    // Garante que apenas a p√°gina de login est√° vis√≠vel no in√≠cio
    showPage('loginPage');
    updateActiveMenu('loginPage');
    
    // Salva textos originais dos bot√µes
    document.querySelectorAll('button[type="submit"]').forEach(btn => {
      btn.setAttribute('data-original-text', btn.textContent);
    });
  });
</script>

</body>
</html>
